<!DOCTYPE html>
<html lang="en">
  <head>
    <title>THMcards</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="Daniel Knapp, Jan Kammer" />

    <link href='//fonts.googleapis.com/css?family=Black+Ops+One' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="//yandex.st/highlightjs/8.0/styles/default.min.css">

    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="/stylesheets/non-responsive.css" rel="stylesheet" />
    <link href="/css/bootstrap-markdown.min.css" rel="stylesheet" />
    <link href="/stylesheets/overrides.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/css3pie/1.0.0/PIE.js"></script>
    <![endif]-->
  </head>

  <body>

    <div id="wrap">
      <div class="container">
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div id="navbar-header" class="navbar-header">
          <a class="navbar-brand" href="#set/list"><img src="/img/cards_logo.png" alt="THMcards Logo" /></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul id="navbar" class="nav navbar-nav">
            <li id="navbar-ownsets"><a href="#set/list" id="cardsets" data-i18n="navbar-collapse.carddecks"></a></li>
            <li id="navbar-pool"><a href="#pool" id="pool" data-i18n="navbar-collapse.pool"></a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><input type="text" class="form-control" placeholder="" id="input-search" data-i18n="[placeholder]navbar-collapse.search"/></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="usr-name"></span> <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#" id="usr-profile" data-i18n="navbar-collapse.myprofile"></a></li>
                <li class="divider"></li>
                <li><a href="/logout" id="logout" style="color:#D9534F" data-i18n="navbar-collapse.logout"></a></li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

        <div id="main" class="row">
          <!-- AREA BETWEEN NAVIGATION AND FOOTER -->
        </div>
      </div>
      <div id="push"></div>
    </div>
    <div id="footer" class="footer">
      <div class="container">
        <p class="muted credit pull-left">&copy; 2014 THMcards</p>
        <p class="muted credit pull-right"><a id="impressum" href="/impressum" data-i18n="footer.impressum"></a></p>
      </div>
    </div>


    <script type="text/template" id="pool-category-layout">
      <div class="row">
        <div class="col-md-12">
          <h3 id="pool-category-layout-headline" style="margin-bottom:20px">w</h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12" id="pool-category-region"></div>
      </div>
    </script>

    <script type="text/template" id="pool-category-list">

    </script>

    <script type="text/template" id="pool-category-list-item">
      <span class="badge"><%= count %></span> <a href="#pool/<%= name %>"><%= name %></a>
    </script>

    <script type="text/template" id="pool-category-set-list" class="pool">
      <thead>
        <tr>
          <th><span data-i18n="pool.name"></span> <a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('name', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('name', 'up');">&uArr;</a></th>
          <th><span data-i18n="pool.description"></span> <a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('description', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('description', 'up');">&uArr;</a></th>
          <th><span data-i18n="pool.created"></span> <a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('created', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Pool.Controller.sortPoolCategoryLayout('created', 'up');">&uArr;</a></th>
        </tr>
      </thead>
      <tbody id="cardSetsPool"></tbody>
    </script>

    <script type="text/template" id="pool-category-set-list-item">
      <td><a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/" class="pool-category-set-details-link"><%= name %></a></td>
      <td><%= description %></td>
      <td><a href="#profile/<%= owner %>" class="pool-category-set-owner-link"><%= owner %></a></td>
    </script>

    <!-- LIST LAYOUTS -->
    <script type="text/template" id="set-list-layout">
      <!--div class="row">
        <div class="col-md-9 col-md-offset-3">
          <h3 style="margin-bottom:20px"></h3>
        </div>
      </div-->
      <div class="row">
        <div class="col-md-3" id="set-list-sideBar-region"></div>
        <div class="col-md-9" id="set-list-region"></div>
      </div>
    </script>

    <script type="text/template" id="set-details-layout">
      <!--div class="row">
        <div class="col-md-9 col-md-offset-3">
          <h3 style="margin-bottom:20px">&nbsp;</h3>
        </div>
      </div-->
      <div class="row">
        <div class="col-md-3">
          <div id="set-details-sideBar-region"></div>
          <div id="set-details-rating-region"></div>
          <div id="set-details-controls-region"></div>
        </div>
        <div class="col-md-9" id="set-details-region"></div>
      </div>
    </script>

    <script type="text/template" id="set-details-newcard-layout">
      <div class="col-md-12">
        <h3 style="margin-bottom:20px" data-i18n="newcard"></h3>
      </div>
      <div class="col-md-12" id="set-newcard-region"></div>
    </script>

    <script type="text/template" id="set-details-editcard-layout">
      <div class="col-md-12">
        <h3 style="margin-bottom:20px" data-i18n="editcard"></h3>
      </div>
      <div class="col-md-12" id="set-editcard-region"></div>
    </script>

    <script type="text/template" id="set-details-item">
      <div class="box" data-id="<%= _id %>">
        <span id="clicktoflip" class="clicktoflip">Click to flip</span>
        <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
        <img class="cardside cardback-symbol" src="/img/icon_back.png" style="display:none"/>
        <a id="editCard" class="btn-editCard btn btn-default btn-xs" href="#editCard" style="display:none">
          <i class="glyphicon glyphicon-pencil"></i>
        </a>
        <a class="btn-showPictureModal btn btn-default btn-xs btn-showPictureDetails" href="#showPictureModal" style="display:none">
          <i class="glyphicon glyphicon-picture"></i>
          <small data-i18n="showpicture"></small>
        </a>
        <div class="block">
          <div class="cardContent centered front active">
            <%= markdown.toHTML(front.text.replace(/(<br>\s*)+$/,'')) %>
          </div>
          <div class="cardContent centered back" style="display:none">
            <%= markdown.toHTML(back.text.replace(/(<br>\s*)+$/,'')) %>
          </div>
      </div>
    </script>

    <script type="text/template" id="set-details-list">
        <div class="listhead">
          <thead>
            <tr>
              <th width="45%"><span data-i18n="foreside"></span> <a href="javascript:void(0)" onclick="Cards.Set.Controller.sortSetDetailsLayout('front', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Set.Controller.sortSetDetailsLayout('front', 'up');">&uArr;</a></th>
              <th width="45%"><span data-i18n="backside"></span> <a href="javascript:void(0)" onclick="Cards.Set.Controller.sortSetDetailsLayout('back',  'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Set.Controller.sortSetDetailsLayout('back',  'up');">&uArr;</a></th>
              <th width="10%" data-i18n="options"></th>
            </tr>
          </thead>
          <tbody></tbody>
        </div>

        <div class="modal fade" id="pictureModalList" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModalList-body">


            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-details-listitem">
        <td>
          <span style="font-family:'Georgia'"><cardcode><%= markdown.toHTML(front.text) %></cardcode></span>
          <% if(front.picture) { %>
            <a class="card-front btn-showPictureModalList" data-id="<%= _id %>" href="#showPictureModalList" >
              <i class="glyphicon glyphicon-picture"></i>
            </a>
          <% } %>
        </td>
        <td>
          <span style="font-family:'Georgia'"><cardcode><%= markdown.toHTML(back.text) %></cardcode></span>
          <% if(back.picture) { %>
            <a class="card-back btn-showPictureModalList" data-id="<%= _id %>" href="#showPictureModalList" >
              <i class="glyphicon glyphicon-picture"></i>
            </a>
          <% } %>
        </td>
        <td>
          <a id="editCardList" class="btn btn-xs btn-default btn-listEditCard" title="" data-i18n="[title]editcard" data-id="<%= _id %>" href="#editCard" style="margin-left:5px; display:none;">
            <i class="glyphicon glyphicon-pencil"></i>
          </a>
          <a id="deleteCardList" class="btn btn-xs btn-default btn-listDeleteCard" title="" data-i18n="[title]deletecard" data-id="<%= _id %>" href="#deleteCard" style="display:none">
            <i class="glyphicon glyphicon-ban-circle"></i>
          </a>
        </td>
    </script>

    <script type="text/template" id="set-details-listitem-empty">
        <td colspan="3" align="center">
          <span style="font-family:'Georgia'" data-i18n="nocards"></span>
        </td>
    </script>

    <script type="text/template" id="set-details-item-empty">
      <div class="box">
        <div class="block"><div class="centered front" style="font-size:2em" data-i18n="nocards"></div>
      </div>
    </script>

    <script type="text/template" id="set-details-collection">
      <div id="cardCarousel" class="carousel slide">
        <div class="carousel-indicators">
          <small class="text-muted card-indicator"> </small>
        </div>
        <div class="carousel-inner"></div>

        <a id="leftCarouselControl" class="left carousel-control" href="#cardCarousel">
          <span class="icon-prev"></span>
        </a>
        <a id="rightCarouselControl" class="right carousel-control" href="#cardCarousel">
          <span class="icon-next"></span>
        </a>
      </div>


      <div class="modal fade" id="pictureModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body">


            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


      <div class="row">
        <div class="col-md-12"><h4>&nbsp</h4></div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="well well-sm setWell">
            <h4 data-i18n="learn"></h4>
            <hr />

            <hr />
            <button id="learnfile" class="btn btn-default learn btn-block" data-i18n="learnfile"></button>
            <button id="memo" class="btn btn-default memo btn-block" style="margin-top:10px;" data-i18n="memo"></button>
          </div>
        </div>
        <div class="col-md-6">
          <div class="well well-sm setWell">
            <h4 data-i18n="meteor"></h4>
            <hr />
            <div class="meteorBox"><span data-i18n="yourhighscore"></span><span class="pull-right"><span id="meteor-set-points">0</span><span> </span><span data-i18n="points"></span></span></div>

            <button id="play" class="btn btn-primary play-meteor btn-block" data-i18n="play"></button>
          </div>
        </div>
      </div>
    </script>

    <script type="text/template" id="set-list-item">
      <td>
        <% if(cardCnt > 0) { %><span class="badge pull-right"><%= cardCnt %></span><% } %>
        <a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/"><%= name %></a>
      </td>
      <td><%= category %></td>
      <td><%= description %></td>
    </script>

    <script type="text/template" id="set-details-newcard">
      <table class="table table-bordered">
        <tbody>
          <tr>
            <td class="cardtext fronttext">
              <div id="fronttext-content-holder" class="hide"></div>
              <input class="form-control fronttext" id="front-textarea" placeholder="" style="width:440px; height:200px; margin:10px auto 0" data-i18n="[placeholder]foreside">
              </input>
              <span class="help-block fronttext"></span>
            </td>
            <td class="cardtext backtext">
              <div id="backtext-content-holder" class="hide"></div>
              <input class="form-control backtext" id="back-textarea" placeholder="" style="width:440px; height:200px; margin:10px auto 0" data-i18n="[placeholder]backside">
              </input>
              <span class="help-block backtext"></span>
            </td>
          </tr>
          <tr>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left front" style="" id="set-details-newcard-input-pic-front-search" type="text" placeholder="" data-i18n="[placeholder]linkorsearchitem">
                  <span class="input-group-btn"><button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-newcard-btn-pic-front-seach" data-i18n="searchpicture"></button></span>
                </div>
              </div>
            </td>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left back" id="set-details-newcard-input-pic-back-search" type="text" placeholder="" data-i18n="[placeholder]linkorsearchitem">
                <span class="input-group-btn">
                <button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-newcard-btn-pic-back-seach" data-i18n="searchpicture"></button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="2"><div style="margin:20px auto; width:412px"><button id="cardCancel2" class="btn btn-default btn-large cancel" style="width:200px" data-i18n="declinecard"></button>&nbsp;&nbsp;&nbsp;<button style="width:200px" id="cardNewCard2" class="btn btn-success btn-large save" data-loading-text="Speichere Karte..." data-i18n="savecard"></button></div></td>
          </tr>
        </tbody>
      </table>

      <div id="pictureSearchModal" class="modal fade pictureSearchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" data-i18n="insertpicture"></h4>
            </div>
            <div class="modal-body" id="pictureSearchModal-body">

            </div>
            <div class="modal-footer" id="pictureSearchModal-footer">
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-details-editcard">
      <table class="table table-bordered">
        <tbody>
          <tr>
            <td class="cardtext fronttext">
              <div id="editfronttext-content-holder" class="hide"></div>
              <input class="form-control fronttext" id="editcard-front-textarea" placeholder="" type="text" style="width:440px; height:200px; margin:10px auto 0" data-i18n="[placeholder]foreside">
              </input>
              <span class="help-block fronttext"></span>
            </td>
            <td class="cardtext backtext">
              <div id="editbacktext-content-holder" class="hide"></div>
              <input class="form-control backtext" id="editcard-back-textarea" placeholder="" type="text" style="width:440px; height:200px; margin:10px auto 0;" data-i18n="[placeholder]backside">
              </input>
              <span class="help-block backtext"></span>
            </td>
          </tr>
          <tr>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left" style="" id="set-details-editcard-input-pic-front-search" type="text" placeholder="" data-i18n="[placeholder]linkorsearchitem">
                  <span class="input-group-btn"><button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-editcard-btn-pic-front-seach" data-i18n="searchpicture"></button></span>
                </div>
              </div>
            </td>
            <td>
              <div class="input-append">
                <div class="input-group">
                <input class="span4 form-control pull-left" id="set-details-editcard-input-pic-back-search" type="text" placeholder="" data-i18n="[placeholder]linkorsearchitem">
                <span class="input-group-btn">
                <button class="btn btn-pictureSearch btn-default btn-info" type="button" id="set-details-editcard-btn-pic-back-seach" data-i18n="searchpicture"></button>
                </span>
              </div>
            </td>
          </tr>
          <tr>
            <td colspan="2">
              <a style="width:150px" id="deleteCard" class="btn btn-danger btn-large btn-card-delete pull-left" data-i18n="deletecard"></a>
              <div class="pull-right">
                <button style="width:150px" id="cardCancel" class="btn btn-default btn-large cancel" data-i18n="declinecard"></button>
                <button style="width:150px" id="cardNewCard" class="btn btn-primary btn-large save" data-loading-text="Speichere Karte..." data-i18n="savecard"></button>
              </div
            </td>
          </tr>
        </tbody>
      </table>

      <div id="editcard-pictureSearchModal" class="modal fade pictureSearchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" data-i18n="insertpicture2"></h4>
            </div>
            <div class="modal-body" id="editcard-pictureSearchModal-body">

            </div>
            <div class="modal-footer" id="editcard-pictureSearchModal-footer">
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

    </script>

    <script type="text/template" id="set-details-sideBar">
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0" data-i18n="sidebar-nav.created"></span>
      <span style="font-family:'Georgia'">
        <a id="usr-profile2" href="/#profile/<%=owner%>"><%= owner %></a>
        <span data-i18n="sidebar-nav.at"></span>
        <%= moment("/Date(" + created + ")/").format("LLL") %></span>
      <hr />
      <span class="nav-header" style="padding-left:0; margin-bottom:3px" data-i18n="sidebar-nav.view"></span>
      <div class="btn-group btn-group-xs btn-group-justified">
        <a id="btnToCardLayout" class="btn btn-default btn-cardLayout" data-i18n="sidebar-nav.viewmap"></a>
        <a id="btnToListLayout" class="btn btn-default btn-listLayout" data-i18n="sidebar-nav.viewlist"></a>
      </div>
      <hr />
    </script>

    <script type="text/template" id="set-details-rating">
      <span class="nav-header" style="padding-left:0;" data-i18n="valuation"></span>
      <div  style="text-align:center">
        <span id="raty" data-score="<%= avgValutation %>" style="display:inline-block"></span>
        <span style="display:inline-block;font-size:11px" class="text-muted">Ø <%= _.str.numberFormat(avgValutation, 1, ',', '.') %><span data-i18n="valuationtext"></span><a href="#set/rating/<%= setId %>" class="show-rating"><%= _.str.numberFormat(totalValutations, 0, ',', '.') %><span id="valuationtext2" data-i18n="valuationtext2"></span></a></span>
      </div>

      <div class="modal fade rating-field" id="ratingModal" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">"<span class="rating-title">Kartensatz</span>"<span data-i18n="rating-field.title"></span></h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label" data-i18n="rating-field.stars"></label>
                  <div class="col-md-9">
                    <div id="ratingStars"></div>
                  </div>
                </div>
                <div class="form-group rateset description">
                  <label class="col-md-3 control-label" for="setRatingComment" data-i18n="rating-field.rating"></label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="setRatingComment" placeholder="" data-i18n="[placeholder]rating-field.minchars"></textarea>
                    <span class="help-block description"></span>
                    <small class="text-muted pull-right" style="margin-left:3px" data-i18n="rating-field.chars"></small> <small class="text-muted pull-right char-cnt">0</small><small class="pull-left text-muted" data-i18n="rating-field.minchars2"></small>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" data-i18n="rating-field.cancel"></button>
              <button type="button" class="btn btn-primary" disabled="disabled" data-i18n="rating-field.edit"></button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->



    </script>

    <script type="text/template" id="set-details-controls">
      <button class="btn btn-primary newCard" id="set-details-controls-btn-newCard" style="width:100%" data-i18n="sidebar-nav.createcard"></button>
      <button class="btn btn-default editSet" id="set-details-controls-btn-editCard" style="width:100%; margin-top:10px" data-i18n="sidebar-nav.editcard"></button>
      <button class="btn btn-default exportSet" id="set-details-controls-btn-exportSet" style="width:100%; margin-top:10px" data-i18n="sidebar-nav.exportSet"></button>

      <div class="modal fade" id="editSetModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" data-i18n="modal-dialog.editcard"></h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label" for="editSetName" data-i18n="modal-dialog.name"></label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="editSetName">
                    <span id="helpEditSetName" class="help-block name"></span>
                  </div>
                </div>
                <div class="form-group setdetails description">
                  <label class="col-md-3 control-label" for="editSetDescription" data-i18n="modal-dialog.description"></label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="editSetDescription"></textarea>
                    <span id="helpEditSetDescription" class="help-block description"></span>
                  </div>
                </div>
                <div class="form-group setdetails category">
                  <label class="col-md-3 control-label" for="editSetCategory" data-i18n="modal-dialog.category"></label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="editSetCategory">
                    <span id="helpEditSetCategory" class="help-block category"></span>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="editSetDescription" data-i18n="modal-dialog.visibility"></label>
                  <div class="controls col-md-9">
                    <div class="btn-group" data-toggle="buttons">
                      <label id="visibilityoption1" class="btn private btn-default active" style="width:100px" >
                        <input type="radio" name="options" value="private" id="edit_visibility_private"><span data-i18n="modal-dialog.visibilityoption1"></span>
                      </label>
                      <label id="visibilityoption2" class="btn public btn-default" style="width:100px">
                        <input type="radio" name="options" value="public" id="edit_visibility_public"> <span data-i18n="modal-dialog.visibilityoption2"></span>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription" data-i18n="modal-dialog.rating"></label>
                  <div class="controls col-md-9">
                    <div class="btn-group btn-group-rating" data-toggle="buttons">
                      <label id="ratingoption1" class="btn rating-true btn-default active" style="width:100px">
                        <input type="radio" name="rating" value="true" id="rating_true"><span data-i18n="modal-dialog.ratingoption1"></span>
                      </label>
                      <label id="ratingoption2" class="btn rating-false btn-default" style="width:100px">
                        <input type="radio" name="rating" value="false" id="rating_false"><span data-i18n="modal-dialog.ratingoption2"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button id="cardSetCancel" class="btn btn-default" data-dismiss="modal" aria-hidden="true" data-i18n="modal-dialog.cancel"></button>
              <button id="cardSetDelete" class="btn btn-danger pull-left btn-setDelete" style="width:150px" data-loading-text="Lösche Deck..." data-i18n="modal-dialog.delete"></button>
              <button id="cardSetSave" class="btn btn-primary" data-loading-text="Speichere Deck..." data-i18n="modal-dialog.save"></button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-list-sideBar">
      <div class="input-group">
        <input class="form-control" type="text" id="new-set-input" placeholder="" data-i18n="[placeholder]input-group.newcarddeck"/>
        <span class="input-group-btn">
          <button id="newCardSet" class="btn btn-primary saveSet" type="button"><i class="glyphicon glyphicon-plus"></i></button>
        </span>
      </div>

      <hr />

      <div class="input-group">
      <form style="width: 143px; float: left;" method="post" action="/import" enctype="multipart/form-data">
      <span class="input-group" style="width: 143px;">
        <span style="position:relative; width: 103px;">
          <input id="file" style="position:absolute; width: 103px;" class="form-control" placeholder="" data-i18n="[placeholder]upload-form.import"/>
          <input id="fileInput" type="file" name="file" style="opacity:0; z-index:1; width: 103px; height: 34px; cursor: pointer;"/>
        </span>
        <span class="input-group-btn">
          <button id="fileSubmit" type="submit" class="btn btn-primary disabled"><i class="glyphicon glyphicon-cloud-upload"></i></button>
        </span>
      </span>
      </form>
      <div style="float: right; margin-left: 9px;">
          <button type="button" id="fileHelp" class="btn btn-default" data-toggle="popover" data-html="true" data-trigger="click" data-container="body" data-content=" " data-placement="right"
                  data-i18n="[data-content]upload-form.popover-content">
              <i class="glyphicon glyphicon-question-sign"></i>
          </button>
      </div>
      </div>

      <hr />
      <ul class="nav nav-list">
        <li class="nav-header" data-i18n="nav-list.category"></li>
        <li class="active"><a id="setCreated" href="#set/list/created" name="set-created" data-i18n="nav-list.created"></a></li>
        <li><a id="setLearned" href="#set/list/created" name="set-learned" data-i18n="nav-list.learned"></a></li>
      </ul>
      <div class="modal fade" id="newSetModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title" data-i18n="modal-dialog.newcarddeck"></h4>
            </div>
            <div class="modal-body">
              <div class="form-horizontal">
                <div class="form-group setdetails name">
                  <label class="col-md-3 control-label" for="newSetName" data-i18n="modal-dialog.name"></label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="newSetName" placeholder="" data-i18n="[placeholder]modal-dialog.nameplaceholder">
                    <span id="helpNewSetName" class="help-block name"></span>
                  </div>
                </div>
                <div class="form-group setdetails description">
                  <label class="col-md-3 control-label" for="newSetDescription" data-i18n="modal-dialog.description"></label>
                  <div class="col-md-9">
                    <textarea class="form-control" rows="3" id="newSetDescription" placeholder="" data-i18n="[placeholder]modal-dialog.descriptionplaceholder"></textarea>
                    <span id="helpNewSetDescription" class="help-block description"></span>
                  </div>
                </div>
                <div class="form-group setdetails category">
                  <label class="col-md-3 control-label" for="newSetCategory" data-i18n="modal-dialog.category"></label>
                  <div class="col-md-9">
                    <input class="form-control" type="text" id="newSetCategory" placeholder="" data-i18n="[placeholder]modal-dialog.categoryplaceholder">
                    <span id="helpNewSetCategory" class="help-block category"></span>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription" data-i18n="modal-dialog.visibility"></label>
                  <div class="controls col-md-9">
                    <div class="btn-group" data-toggle="buttons">
                      <label id="newCardSetVisibilityoption1" class="btn btn-default active" style="width:100px">
                        <input type="radio" name="options" value="private" id="visibility_private"><div data-i18n="modal-dialog.visibilityoption1"></div>
                      </label>
                      <label id="newCardSetVisibilityoption2" class="btn btn-default" style="width:100px">
                        <input type="radio" name="options" value="public" id="visibility_public"><div data-i18n="modal-dialog.visibilityoption2"></div>
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-md-3 control-label" for="newSetDescription" data-i18n="modal-dialog.rating"></label>
                  <div class="controls col-md-9">
                    <div class="btn-group btn-group-rating" data-toggle="buttons">
                      <label id="newCardSetRatingoption1" class="btn btn-default active" style="width:100px">
                        <input type="radio" name="rating" value="true" id="rating_true"><div data-i18n="modal-dialog.ratingoption1"></div>
                      </label>
                      <label id="newCardSetRatingoption2" class="btn btn-default" style="width:100px">
                        <input type="radio" name="rating" value="false" id="rating_false"><div data-i18n="modal-dialog.ratingoption2"></div>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button id="newCardSetCancel" class="btn btn-default" data-dismiss="modal" aria-hidden="true" data-i18n="modal-dialog.cancel"></button>
              <button id="createCardSet" class="btn btn-primary" data-loading-text="Speichere Deck..." data-i18n="modal-dialog.createcarddeck"></button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->

    </script>

    <script type="text/template" id="set-list">
      <thead class="set-list">
        <tr>
          <th><span data-i18n="set-list.name"></span> <a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('name', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('name', 'up');">&uArr;</a></th> 
          <th width="25%"><span data-i18n="set-list.category"></span> <a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('category', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('category', 'up');">&uArr;</a></th>
          <th width="40%"><span data-i18n="set-list.description"></span> <a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('description', 'down');">&dArr;</a><a href="javascript:void(0)" onclick="Cards.Set.Controller.showListLayout('description', 'up');">&uArr;</a></th>
        </tr>
      </thead>
      <tbody id="cardSetView"></tbody>
    </script>

    <script type="text/template" id="set-list-empty">
          <td class="emptyCellList set-list-empty" colspan="3" align="center" height="60">
            <span class="emptyTextList" data-i18n="set-list-empty.emptytextlist"></span>
            <br />
            <a class="btn-newSet btn btn-primary btn-s">
              <span id="setListEmpty" data-i18n="set-list-empty.newset"></span>
            </a>
          </td>
    </script>

    <script type="text/template" id="set-list-learned-empty">
          <td class="emptyCellList set-list-learned-empty" colspan="3" align="center" height="60">
            <span class="emptyTextList" data-i18n="set-list-learned-empty.emptytextlist"></span>
            <br /><br />
          </td>
    </script>

    <script type="text/template" id="set-rating-list">
      <thead class="rating-table">
        <tr>
          <th width="30%" data-i18n="rating-table.name"></th>
          <th width="10%" data-i18n="rating-table.rating"></th>
          <th width="60%" data-i18n="rating-table.comment"></th>
        </tr>
      </thead>
      <tbody></tbody>
    </script>

    <script type="text/template" id="set-rating-item">
      <td><a href="#profile/<%= owner %>" class="profile-link"><%= owner %></a></td><td><div class="rating" data-score="<%= value %>"></div></td><td><%= comment %></td>
    </script>

    <script type="text/template" id="set-rating-item-empty">
      <td colspan="3" align="center"><p class="text-muted" style="margin-top:8px"><em data-i18n="norating"></em></p></td>
    </script>

    <script type="text/template" id="set-rating-sideBar">
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0" data-i18n="createdof"></span>
      <span style="font-family:'Georgia'"><a href="/#profile/<%=owner%>"><%= owner %></a> am <%= moment("/Date(" + created + ")/").format("LLL") %></span>
      <hr />
      <a href="#" class="back-to-set btn btn-default btn-block btn-primary" data-i18n="backcarddecks"></a>
    </script>

    <script type="text/template" id="game-meteor-layout">
      <div class="row">
        <div class="col-md-12">
          <div id="game-meteor-pitch-region"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div id="game-meteor-sideBar-region"></div>
        </div>
      </div>
    </script>

    <script type="text/template" id="game-meteor-sideBar">
      <div class="row">

      </div>
    </script>

    <script type="text/template" id="game-meteor-pitch">
      <div id="meteor-pitch">
        <div id="meteor-countdown">
          <div id="meteor-countdown-welcome">
            <div class="meteor-countdown-back">&nbsp;</div>
            <div class="meteor-welcome-front">
              <span>Meteor</span>
              <div class="meteor-welcome-description" data-i18n="meteorgame.description"></div>
              <div><a href="#" id="meteorstart" class="btn btn-primary btn-lg" data-i18n="meteorgame.start"></a></div>
              <br /><br />
              <p><p class="label label-warning" data-i18n="meteorgame.warning"></p></p>
            </div>
          </div>
          <span id="meteor-countdown-counter" style="padding-top:150px; display:block"></span>
        </div>
        <div id="meteor-statistics" style="display:none">
          <div id="meteor-lifes"><span class="glyphicon glyphicon-heart"></span><span class="glyphicon glyphicon-heart"></span><span class="glyphicon glyphicon-heart"></span></div>
          <div id="meteor-level"><span data-i18n="meteorgame.level"></span><span id="meteor-level-cnt">1</span></div>
          <div id="meteor-points">0</div>
        </div>
      </div>
      <div style="margin:20px 0 10px">
        <div class="row">
         <div class="col-lg-12">
          <div class="input-group">
            <input type="input" id="meteoranswer" class="form-control meteor-answer" disabled="disabled" placeholder="" data-i18n="[placeholder]meteorgame.answer"/>
            <span class="input-group-btn">
              <button id="meteorquit" class="btn btn-default btn-danger" type="button" data-i18n="meteorgame.quit"></button>
            </span>
          </div><!-- /input-group -->
        </div>
      </div>
      <div class="playcardcontainer" style="display: none"></div>

      <div class="modal fade" id="meteor-answer-modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" data-i18n="meteorgame.answer2"></h4>
            </div>
            <div class="modal-body">
              <div class="panel panel-info">
                <div class="panel-heading" data-i18n="meteorgame.question"></div>
                <div class="panel-body">
                  <p id="meteor-answer-modal-front"></p>
                </div>
              </div>

              <div class="panel panel-success">
                <div class="panel-heading" data-i18n="meteorgame.correctanswer"></div>
                <div class="panel-body">
                  <p id="meteor-answer-modal-back"></p>
                </div>
              </div>
              <input type="text" placeholder="" data-i18n="[placeholder]meteorgame.insertanswer" class="form-control" id="meteor-answer-modal-input" />
            </div>
            <div class="modal-footer">

              <button type="button" id="meteoranswer2" class="btn btn-success" disabled="disabled" data-i18n="meteorgame.answer3"></button>
            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


      <div class="modal fade" id="meteor-gameover-modal">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" data-i18n="meteorgame-gameover.gameover"></h4>
            </div>
            <div class="modal-body">
              <div class="alert alert-info" style="text-align:center"><span data-i18n="meteorgame-gameover.text1"></span><strong>400</strong> <strong data-i18n="meteorgame-gameover.text2"></strong><span data-i18n="meteorgame-gameover.text3"></span></div>

              <div class="panel panel-success" style="display:none">

                <div class="panel-heading" data-i18n="meteorgame-gameover.highscores"></div>

                <table class="table">
                  <thead>
                    <th data-i18n="meteorgame-gameover.player"></th><th data-i18n="meteorgame-gameover.points"></th>
                  </thead>
                  <tbody>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" id="meteorback" class="btn btn-default back" data-i18n="meteorgame-gameover.back"></button>
              <button type="button" id="meteornewgame" class="btn btn-success newGame" data-i18n="meteorgame-gameover.newgame"></button>

            </div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


    </script>

    <script type="text/template" id="game-meteor-playcard">
      <span data-answer="<%= markdown.toHTML(back.text_plain.toLowerCase()) %>" data-cardid="<%= _id %>"><%= markdown.toHTML(front.text_plain) %></span>
    </script>

    <!--Learn -->
    <script type="text/template" id="set-learn-layout">
      <div class="row">
        <div class="col-md-3">
          <div id="set-learn-sideBar-region"></div>
          <div id="set-learn-controls-region"></div>
        </div>
        <div class="col-md-9">
          <div id="set-learn-region"></div>
        </div>
      </div>
    </script>

    <script type="text/template" id="set-learn-sideBar">
      <h4 style="margin:0"><%= name %></h4>
      <hr />
      <span style="font-family:'Georgia'; font-style:italic"><%= description %></span>
      <hr />
      <span class="nav-header" style="padding-left:0" data-i18n="createdof2"></span>
      <span style="font-family:'Georgia'"><a href="/#user/<%=owner%>"><%= owner %></a> am <%= moment("/Date(" + created + ")/").format("LLL") %></span>
    </script>

    <script type="text/template" id="set-learn-controls">
      <button id="subject1" class="btn btn-default learn-box" title="1" style="width:100%;">
        <span class="pull-left" data-i18n="subject1"></span>
        <span class="badge pull-right box-indicator one" title="1">0</span>
      </button>
      <button id="subject2" class="btn btn-default learn-box" title="2" style="width:100%; margin-top:10px">
        <span class="pull-left" data-i18n="subject2"></span>
        <span class="badge pull-right box-indicator two" title="2">0</span>
      </button>
      <button id="subject3" class="btn btn-default learn-box" title="3" style="width:100%; margin-top:10px">
        <span class="pull-left" data-i18n="subject3"></span>
        <span class="badge pull-right box-indicator three" title="3">0</span>
      </button>
      <button id="subject4" class="btn btn-default learn-box" title="4" style="width:100%; margin-top:10px">
        <span class="pull-left" data-i18n="subject4"></span>
        <span class="badge pull-right box-indicator four" title="4">0</span>
      </button>
      <button id="subject5" class="btn btn-default learn-box" title="5" style="width:100%; margin-top:10px">
        <span class="pull-left" data-i18n="subject5"></span>
        <span class="badge pull-right box-indicator five" title="5">0</span>
      </button>
    </script>


    <script type="text/template" id="set-learn-collection">
      <div id="cardCarousel" class="carousel slide" style="display:none">
        <div class="carousel-indicators">
          <small class="text-muted card-indicator"></small>
        </div>
        <div class="carousel-inner"></div>
      </div>

      <div id="learn-navigation">
            <button id="know" class="btn btn-primary answer card-success" style="width:100%; margin-top:10px; display:none" data-i18n="know"></button>
            <button id="notknow" class="btn btn-default answer card-fail" style="width:100%; margin-top:10px; display:none" data-i18n="notknow"></button>
      </div>

      <div class="box learn-endscreen" style="display:none">
        <div class="block">
          <div class="centered front learnbox-success" data-i18n="learn-endscreen.success">

          </div>
          <div class="centered front learnbox-choose-message" data-i18n="learn-endscreen.back">
                </div>
          <br />
          <a id="endscreenBack" class="btn-back btn btn-default btn-s learn-back" onclick="history.go(-1)">
            <span data-i18n="learn-endscreen.back2"></span>
          </a>
          </div>
        </div>
      </div>

      <div class="box learn-startscreen">
        <div class="block">
          <div class="centered front" style="font-size:1.8em" data-i18n="choosesubject">

          </div>
        </div>
      </div>

      <div class="learn-cardHelptext" style="display:none">
            <span data-i18n="clickcart"></span>
      </div>

      <div class="modal fade" id="pictureModalLearn" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body"></div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->
    </script>

    <script type="text/template" id="set-learn-item">
      <div class="box" data-id="<%= _id %>">
        <span id="clicktoflip2" class="clicktoflip">Click to flip</span>
        <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
        <img class="cardside cardback-symbol" src="/img/icon_back.png" style="display:none"/>
        <a class="btn-showPictureModal btn btn-default btn-xs" href="#showPictureModal" style="display:none">
          <i class="glyphicon glyphicon-picture"></i>
          <small>Bild anzeigen</small>
        </a>
        <div class="block"><div class="cardContent centered front active"><%= markdown.toHTML(front.text) %></div><div class="cardContent centered back" style="display:none"><%= markdown.toHTML(back.text) %></div>
      </div>
    </script>

    <script type="text/template" id="set-learn-item-empty">
      <div class="box">
        <div class="block"><div class="centered front" style="font-size:2em" data-i18n="nocards"></div>
      </div>
    </script>

    <!--Memo -->
    <script type="text/template" id="set-memo-layout">
      <div class="row">
        <div class="col-md-12">
          <div id="set-memo-region"></div>
        </div>
      </div>
    </script>


    <script type="text/template" id="set-memo-collection">
      <div id="cardCarousel" class="carousel slide cardmemo">
        <ol class="carousel-indicators"></ol>
        <div class="carousel-inner"></div>
        <button id="memoShowAnswer" class="btn btn-primary answer show-answer" title="success" data-i18n="cardmemo.showanswer"></button>
        <div class="rating-controls" style="display:none">
          <div class="btn-toolbar memo-toolbar">
            <div class="memo-cardHelptext">
              <span data-i18n="cardmemo.rateanswer"></span>
            </div>
            <div class="btn-group memo-rating">
              <button id="memoRate0" class="btn btn-default rate-answer wrong" data-placement="bottom" data-id="0" data-i18n="[title]cardmemo.rate0" title="">0</button>
              <button id="memoRate1" class="btn btn-default rate-answer wrong" data-placement="bottom" data-id="1" data-i18n="[title]cardmemo.rate1" title="">1</button>
              <button id="memoRate2" class="btn btn-default rate-answer" data-placement="bottom" data-id="2" data-i18n="[title]cardmemo.rate2" title="">2</button>
              <button id="memoRate3" class="btn btn-default rate-answer" data-placement="bottom" data-id="3" data-i18n="[title]cardmemo.rate3" title="">3</button>
              <button id="memoRate4" class="btn btn-default rate-answer" data-placement="bottom" data-id="4" data-i18n="[title]cardmemo.rate4" title="">4</button>
              <button id="memoRate5" class="btn btn-default rate-answer" data-placement="bottom" data-id="5" data-i18n="[title]cardmemo.rate5" title="">5</button>
              <a id="memetext" class="btn btn-default btn-info memo-helptext" data-placement="bottom" title="Memo" data-i18n="[data-content]cardmemo.memotext" data-content="">
                <i class="glyphicon glyphicon-question-sign"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="memo-endscreen" style="display:none">
        <div class="row twosided">
          <div class="col-md-6">
            <div class="box">
              <div class="block memocontent-block"><div class="double" data-i18n="memo-endscreen.text"></div>
                <br />
                <a id="memoEndscreenBack" class="btn-back btn btn-default btn-s" onclick="history.go(-1)">
                  <span data-i18n="memo-endscreen.back"></span>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box">
              <div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="pictureModalMemo" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">&nbsp;</h4>
            </div>
            <div class="modal-body" id="setdetails-pictureModal-body"></div>
          </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
      </div><!-- /.modal -->


    </script>

    <script type="text/template" id="set-memo-item">
    <div class="row twosided" data-id="<%= _id %>">
      <div class="col-md-6">
        <div class="box">
          <div class="memo-setname"><span class="setname"></span></div>
          <span class="clicktoflip" data-i18n="foreside"></span>
          <img class="cardside cardfront-symbol" src="/img/icon_front.png" />
          <a class="cardcontent-front btn-showPictureModal btn btn-default btn-xs" href="#showPictureModalMemo" style="display:none">
            <i class="glyphicon glyphicon-picture"></i>
            <small>Bild anzeigen</small>
          </a>
          <div class="block memocontent-block"><div class="double cardcontent-front"><%= markdown.toHTML(front.text) %></div></div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="box">
          <span class="clicktoflip" data-i18n="backside"></span>
          <img class="cardside cardback-symbol memoback" src="/img/icon_back.png" />
          <a class="cardcontent-back btn-showPictureModal btn btn-default btn-xs" href="#showPictureModalMemo" style="display:none">
            <i class="glyphicon glyphicon-picture"></i>
            <small>Bild anzeigen</small>
          </a>
          <div class="block memocontent-block"><div class="double cardcontent-back" style="display:none"><%= markdown.toHTML(back.text) %></div></div>
        </div>
      </div>
    </div>
    </script>


    <script type="text/template" id="set-memo-item-empty">
        <div class="row twosided memo-empty">
          <div class="col-md-6">
            <div class="box">
              <div class="block memocontent-block"><div class="double" data-i18n="memo-empty.text"></div>
                <br />
                <a class="btn-back btn btn-default btn-s" onclick="history.go(-1)">
                  <span data-i18n="memo-empty.back"></span>
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="box">
              <div>
              </div>
            </div>
          </div>
        </div>
    </script>

    <script type="text/template" id="profile-layout">
      <div class="row profil-header">
        <div class="col-md-12">
          <h3 style="margin-bottom:20px"><span data-i18n="profil-header.name"></span><span id="profileName"></span></h3>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12" id="profile-private-region"></div>
      </div>
      <div class="row">
        <div class="col-md-6" id="profile-info-region"></div>
        <div class="col-md-6" id="profile-xp-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-badge-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-score-region"></div>
      </div>

      <div class="row">
        <div class="col-md-12" id="profile-set-region"></div>
      </div>
    </script>

    <script type="text/template" id="profile-private-item">
      <div class="well" style="width:50%; margin:20px auto; text-align:center;">
        <h4 data-i18n="well.error"></h4>
      </div>
    </script>

        <script type="text/template" id="profile-xp-item">
      <div class="panel-heading panel-heading-experience">
        <h3 class="panel-title" data-i18n="panel-heading-experience.experience"></h3>
      </div>
      <div class="panel-body panel-body-experience">
        <div class="row" style="margin-bottom:15px">
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row"><span style="display:inline-block; height:50px; font-size:40px"><%= _.str.numberFormat(totalXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px" data-i18n="panel-body-experience.total"></span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:30px; margin-top:12px"><%= _.str.numberFormat(todayXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px" data-i18n="panel-body-experience.today"></span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:25px; margin-top:17px; height:25px;"><%= _.str.numberFormat(yesterdayXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px" data-i18n="panel-body-experience.yesterday"></span></div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="well well-sm" style="margin:0; text-align:center">
              <div class="row" style="height:50px;"><span style="display:inline-block; font-size:20px; margin-top:22px; height:20px"><%= _.str.numberFormat(lastSevenDaysXPoints, 0, ',', '.') %></span></div>
              <div class="row"><span class="text-muted" style="font-size:12px" data-i18n="panel-body-experience.days"></span></div>
            </div>
          </div>
        </div>
        <% if(lastRedeem) { %>
        <div class="row" style="margin-bottom:15px">
          <div class="col-md-12">
            <span class="text-muted" data-i18n="panel-body-experience.lastredeem"></span> <span class="pull-right text-muted"><%= lastRedeem.name %> (+<%= lastRedeem.value %>)</span>
          </div>
        </div>
        <hr />
        <% } %>
        <div class="row" style="margin-top:15px">
          <div class="col-md-2" style="text-align:center;">
            <div style=" width:36px; height:36px; background-image:url('/img/trophy_36x36.png')"><span style="font-weight:bold; color: #000; font-size:13px; padding-top:5px; display:inline-block"><%= currentLevel %></span></div>
          </div>
          <div class="col-md-8" style="text-align:center">
            <div class="progress" style="margin:0">
              <div class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: <%= pointsLevel-pointsRemaining %>0%;">
                <span class="sr-only"><%= pointsLevel-pointsRemaining %>0% Complete</span>
              </div>
            </div>
            <small class="text-muted"><span data-i18n="pointslvl1"></span> <em><%= _.str.numberFormat(pointsRemaining, 0, ',', '.') %> <span data-i18n="pointslvl2"></span></em><span data-i18n="pointslvl3"></span></small>
          </div>
          <div class="col-md-2" style="text-align:center;">
            <div style=" width:36px; height:36px; background-image:url('/img/trophy_36x36_gray.png')"><span style="font-weight:bold; color: #fff; font-size:13px; padding-top:5px; display:inline-block"><%= currentLevel+1 %></span></div>
          </div>
        </div>
      </div>

    </script>

    <script type="text/template" id="profile-info-item">
      <div class="panel-heading">
        <h3 class="panel-title" data-i18n="panel-heading.hallo"></h3>
      </div>
      <div class="panel-body">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-md-4 control-label" data-i18n="panel-body.name"></label>
            <div class="col-md-8">
              <p class="form-control-static"><%= username %></p>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label" data-i18n="panel-body.login"></label>
            <div class="col-md-8">
              <p class="form-control-static"><%= _.str.capitalize(provider) %></p>
            </div>
          </div>
          <% if(JSON.parse($.cookie('usr')).username == username) { %>
          <div class="form-group">
            <label for="inputEmail3" class="col-md-4 control-label" data-i18n="panel-body.email"></label>
            <div class="col-md-7">
              <input type="email" class="form-control" id="inputEmail3" placeholder="Email" value="<%= email %>">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-4 control-label" data-i18n="panel-body.profilepublic"></label>
            <div class="col-md-8">
              <div class="btn-group" data-toggle="buttons">
                <label id="profilepublicoption1" class="btn btn-default profile-public <% if(profile == 'public') { %>active<% } %>" style="width:117px">
                  <input type="radio" name="options" value="private"><div data-i18n="panel-body.profilepublicoption1"></div>
                </label>
                <label id="profilepublicoption2" class="btn btn-default profile-private <% if(profile == 'private') { %>active<% } %>" style="width:118px">
                  <input type="radio" name="options" value="public"> <div data-i18n="panel-body.profilepublicoption2"></div>
                </label>
              </div>
            </div>
          </div>
          <% } %>
        </form>
      </div>
    </script>

    <script type="text/template" id="profile-score-item">
      <div class="panel-heading panel-heading-meteor">
        <h3 class="panel-title" data-i18n="panel-heading-meteor.meteor"></h3>
      </div>
      <div class="panel-body panel-body-meteor">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-md-6 control-label" data-i18n="panel-body-meteor.points"></label>
            <div class="col-md-6">
              <p class="form-control-static"><%= _.str.numberFormat(score, 0, ',', '.') %></p>
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-6 control-label" data-i18n="panel-body-meteor.played"></label>
            <div class="col-md-6">
              <p class="form-control-static"><%= gameCnt %> <% if(gameCnt != 1) { %><span data-i18n="panel-body-meteor.games"></span><%} else {%><span data-i18n="panel-body-meteor.game"><%} %> <small class="text-muted">(Ø ~<%= _.str.numberFormat(score/gameCnt, 0, ',', '.') %>)</small></p>
            </div>
          </div>
        </form>
      </div>
      <table class="table table-hover table-striped table-meteor">
        <thead>
          <th data-i18n="table-meteor.carddeck"></th>
          <th data-i18n="table-meteor.yourhighscore"></th>
          <th data-i18n="table-meteor.position"></th>
          <th data-i18n="table-meteor.highscore"></th>
        </thead>
        <tbody>
          <%
            if(games.length > 0) {
              _.each(games, function(game){
          %>
                <tr><td><a href="#set/details/<%= game.setName %>/<%= game.setId %>" class="set-link" data-set-id="<%= game.setId %>"><%= game.setName %></a></td><td><%= _.str.numberFormat(game.personalHighscore, 0, ',', '.') %></td><td><%= game.position %></td><td><%= _.str.numberFormat(game.overallHighscore, 0, ',', '.') %></td></tr>
          <%
              })
            } else {
          %>
                <tr><td colspan="4" align="center"><p class="text-muted" style="margin-top:10px; font-style:italic" data-i18n="meteortext"></p></td>
          <%  } %>
        </tbody>
      </table>
    </script>


    <script type="text/template" id="profile-badge-list">
      <div class="panel-heading panel-heading-badges">
        <h3 class="panel-title" data-i18n="panel-heading-badges.badges"></h3>
      </div>
      <div class="panel-body pangel-body-badges">
      <a href="http://openbadges.org" target="_blank"><img alt="We Issue OpenBadges" src="/img/OpenBadges_Insignia_WeIssue.png" style="position:absolute; top:19px; right:30px"></a>
      <p><span data-i18n="panel-body-badges.text1"></span><br /><span data-i18n="panel-body-badges.text2"></span><a id="openBadges" href="http://openbadges.org/" target="_blank" data-i18n="panel-body-badges.text3"></a><span data-i18n="panel-body-badges.text4"> </span></p><p class="" style="text-align:center; margin-top:15px" ><a id="openBadgesButton" class="btn btn-success issueBadge" data-i18n="panel-body-badges.button"></a></p>
      </div>
        <table class="table">
          <tbody></tbody>
        </table>
    </script>

    <script type="text/template" id="profile-badge-item"><!--td align="center">
      <img src="/badges/<%= _id %>_3.png" width="30" height="30" />
      <img src="/badges/<%= _id %>_2.png" width="30" height="30" />
      <img src="/badges/<%= _id %>_1.png" width="60" />
      </td-->
      <td><p style="margin:5px 0 15px 0">


      <table class="table table-bordered" style="margin-bottom:0; position:relative; bottom:5px; float:left;width:100%">
        <tbody>
          <tr>
          <td colspan="4"><strong><%= name %></strong></td><td rowspan="3" width="20%" align="center">
      <%
        if(typeof(user) != "undefined") {
      %>

        <img src="/badges/<%= _id %>_<%= user.rank %><% if(user.issuedOn == 0 || _.isUndefined(user.issuedOn)) { %>_gray<% } %>.png" alt="<%= name %>" width="75" height="75" />

        <p>
          <strong><%= name %>
          <% if(user.rank == 3) { %> (Bronze) <% } %>
          <% if(user.rank == 2) { %> (Silber) <% } %>
          <% if(user.rank == 1) { %> (Gold) <% } %>
          </strong><br />
          <small>
          <% if(user.issuedOn > 0) { %>
            Erhalten am <%= new Date(user.issuedOn*1000).format('d.m.y')  %></small>
          <% } else { %>
            <% if(user.rank == 3 && user.progress == 0) { %>
              Beginne zu Lernen!
            <% } else { %>
              Lerne und erhalte diesen Badge!
            <% } %>

          <% } %>
        </p>

        <div class="progress">
          <div class="progress-bar" role="progressbar"  style="width: <%= user.progress/user.nextRank*100 %>%">
          </div>
        </div>
      <%
        }
      %></td>
          </tr>
          <tr>
            <td align="center"><img src="/badges/<%= _id %>_1.png" height="60" /><br /><strong data-i18n="gold"></strong></td>
            <td align="center"><img src="/badges/<%= _id %>_2.png" height="60" /><br /><strong data-i18n="silver"></strong></td>
            <td align="center"><img src="/badges/<%= _id %>_3.png" height="60" /><br /><strong data-i18n="bronze"></strong></td>
            <td rowspan="2" width="40%"><%= description %></p></td>

          </tr>
          <tr>
            <td class="active" align="center"><%= rank["1"] %> <%= unit %></td>
            <td class="active" align="center"><%= rank["2"] %> <%= unit %></td>
            <td class="active" align="center"><%= rank["3"] %> <%= unit %></td>
          </tr>
        </tbody>
      </table>
      </td>
    </script>

    <script type="text/template" id="profile-set-list">
      <div class="panel-heading">
        <h3 class="panel-title" data-i18n="carddecks"></h3>
      </div>
        <table class="table table-striped table-bordered table-hover carddeck-table">
          <thead>
            <tr>
              <th width="300" data-i18n="carddeck-table.name"></th>
              <th width="150" data-i18n="carddeck-table.category"></th>
              <th data-i18n="carddeck-table.description"></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
    </script>

    <script type="text/template" id="profile-set-item">
      <td><a href="#set/details/<%= name.replace(/[^a-zA-Z0-9-_]/g, '_') %>/<%= _id %>/"><%= name %></a> <span class="badge pull-right"><%= cardCnt %></span></td>
      <td><%= _.escape(category) %></td>
      <td><%= _.escape(description) %></td>
    </script>

    <script type="text/javascript" src="/javascripts/lib/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/underscore-min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/underscore.string.min.js"></script>
    <script type="text/javascript"> _.mixin(_.str.exports()) </script>
    <script type="text/javascript" src="/javascripts/lib/backbone-min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/backbone.marionette.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/modernizr.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/socket.io.min.js"></script>
    <script type="text/javascript" src="javascripts/lib/jquery.pause.min.js"></script>

    <script type="text/javascript" src="/javascripts/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/bootstrap.min.js"></script>

    <script type="text/javascript" src="/javascripts/lib/markdown.js"></script>
    <script type="text/javascript" src="/javascripts/lib/bootstrap-markdown.js"></script>

    <script type="text/javascript" src="/javascripts/lib/typeahead.min.js"></script>
    <script type="text/javascript" src="javascripts/lib/fileSaver.min.js"></script>

    <script type="text/javascript" src="/javascripts/Cards.js"></script>

    <script type="text/javascript" src="/javascripts/entities/Set.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Card.js"></script>
    <script type="text/javascript" src="/javascripts/entities/User.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Personalcard.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Category.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Score.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Rating.js"></script>
    <script type="text/javascript" src="/javascripts/entities/Badge.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Pool.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.CategoryView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.CategorySetView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Pool.Layout.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.List.ListView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.List.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.List.Layout.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Details.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.DetailsView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.NewCardView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Details.EditCardView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Rating.RatingView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Learn.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Learn.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Learn.DetailsView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Set.Memo.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Memo.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Set.Memo.DetailsView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Profile.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.InfoView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.ScoreView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.XpView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.BadgeView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.SetView.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Profile.PrivateView.js"></script>

    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.Layout.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Controller.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.SideBar.js"></script>
    <script type="text/javascript" src="/javascripts/modules/Game.Meteor.PitchView.js"></script>

    <script type="text/javascript" src="/javascripts/lib/jquery.cookie.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/Date.format.min.js"></script>

    <script type="text/javascript" src="/javascripts/lib/jquery.raty.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/jquery.clickout.js"></script>

    <script src="/javascripts/lib/highlight.js"></script>

    <script src="//backpack.openbadges.org/issuer.js"></script>

    <script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script type="text/javascript" src="/javascripts/lib/i18next-1.7.3.min.js"></script>
    <script type="text/javascript" src="/javascripts/lib/moment-with-langs.min.js"></script>
    <script type="text/javascript" src="/javascripts/translation.js"></script>

    <script type="text/javascript">
      $(function(){
        Cards.start();
      })

      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });

      var url = window.location.href.toString().split(window.location.host)[0] + window.location.host;
      var socket = io.connect(url);
      socket.on('set', function (data) {
        console.log(data);
      });
      socket.on('badge', function (badge) {
        console.log("badge", badge);
        $("#notificationContainer .badgeTitle").text(badge.title);
        var rank = new Array("Gold", "Silber", "Bronze");

        $("#notificationContainer span.rank").text(rank[badge.rank-1]);
        $("#notificationContainer img").attr('src', '/badges/'+badge.badge+'_'+badge.rank+'.png');
        $("#notificationContainer").fadeIn();

        $("#notificationContainer button.close").click(function(ev){
          console.log("close");
          $("#notificationContainer").fadeOut();
        });
      });
    </script>
    <script type="text/javascript">
      var $buoop = {vs:{i:10,f:20,o:15,s:5.1,n:9}};
      $buoop.ol = window.onload;
      window.onload=function(){
        try {if ($buoop.ol) $buoop.ol();}catch (e) {}
        var e = document.createElement("script");
        e.setAttribute("type", "text/javascript");
        e.setAttribute("src", "//browser-update.org/update.js");
        document.body.appendChild(e);
      }
    </script>

    <div id="notificationContainer" style="padding:10px 15px 15px; position: absolute; display:none; width:350px; right: 10px; top: 10px; z-index: 10000; opacity: 0.9; border:1px solid #777; background-color:#fff; border-radius:5px">
      <button type="button" class="close" aria-hidden="true" style="float:right">&times;</button>
      <div style="float:left; margin-right:20px;">
        <img src="/badges/badge/stammgast_3.png" alt="<%= name %>" width="75" height="75" style="margin-top:5px; display:inline-block" />
      </div>
      <div>
          <h4 data-i18n="newbadge"></h4>
          <span data-i18n="badgetext1"></span><strong class="badgeTitle" data-i18n="badgetext2"></strong> <strong>(<span class="rank"></span>)</strong><span data-i18n="badgetext3"></span>
      </div>
    </div>
  </body>
</html>
